{% import 'macros/form.html' as form %}

{% set action_url = h.url_for('orgportals_pages_edit', org_name=org_name, page='') %}
{% set cancel_url = h.url_for('orgportals_pages_index', org_name=org_name) %}
{% set delete_url = h.url_for('orgportals_pages_delete', org_name=org_name, page='') %}


{% if not page %}
  <h1>{{ _('Add page') }}</h1>
{% else %}
  <h1>{{ _('Edit page') }}</h1>
{% endif %}
{% set url_placeholder = 'eg. my-page' %}
{% set title_placeholder = _('eg. Page Title') %}



<form class="form-horizontal" method="post" action="{{ action_url }}" data-module="basic-form">

  {{ form.input('title', id='field-title', label=_('Title'), placeholder=title_placeholder, value=page.title, classes=['control-full', 'control-large']) }}

  {{ form.markdown('content', id='field-content', label=_('Content'), placeholder=_('Enter content here'), value=page.type) }}


  <div class="form-actions">
    {% if not page %}
      <a class="btn pull-left" href="{{ cancel_url }}">{{ _('Cancel') }}</a>
      <button class="btn btn-primary" name="save" value="save" type="submit">{{ _('Add') }}</button>
    {% else %}

      {% block delete_button %}
        {% if h.check_access('orgportals_pages_delete', {'page': page.type})  %}
          {% set locale = h.dump_json({'content': _('Are you sure you want to delete this Page?')}) %}
          <a class="btn btn-danger pull-left" href="{{ delete_url }}" data-module="confirm-action" data-module-i18n="{{ locale }}">{% block delete_button_text %}{{ _('Delete') }}{% endblock %}</a>
        {% endif %}
      {% endblock %}

      <button class="btn btn-primary" name="save" value="save" type="submit">{{ _('Save') }}</button>
    {% endif %}
  </div>

</form>
